<% 
	var headContent = {
	include("/pages/template/head.html"){}
	include("/static/component/include/ztree.html"){}
%>
  <SCRIPT type="text/javascript" >
  <!--
	var zTree;
	var demoIframe;

	var setting = {
		view: {
			//dblClickExpand: true, // 双击展开
			dblClickExpand:dblClickExpand,
			showLine: true,  		//虚线
			selectedMulti: false
		},
		data: {
			simpleData: {
				enable:true,
				idKey: "id",
				pIdKey: "pId",
				rootPId: ""
			}
		},
		callback: {
			beforeClick: function(treeId, treeNode) {
				var zTree = $.fn.zTree.getZTreeObj("tree");
				if (treeNode.isParent) {
					$("#testIframe").attr("src","column/list?attr.id="+treeNode.id);
					return false;
				} else {
					$("#testIframe").attr("src","column/list?attr.id="+treeNode.id); //+treeNode.name
					return true;
				}
			}
		}
	};

	function dblClickExpand(treeId, treeNode) {
		return treeNode.level > 0;
	}
	
	var zNodes = ${nodes};
	
	$(document).ready(function(){
		var t = $.fn.zTree.init($("#tree"), setting, zNodes);
		var zTree = $.fn.zTree.getZTreeObj("tree");
		zTree.selectNode(zTree.getNodeByParam("id", 1));
		//显示Menu索引
		showMenu('page_column');
	});
	
	function oper_update_cache(){
		ajax_post("update_cache","",function(data){
			if(data==1) Alert("更新成功");
			else Alert("更新失败");
		});
	}
  //-->
  </SCRIPT>
  <style type="text/css">
.ztree li span.button.switch.level0 {visibility:hidden; width:1px;}
.ztree li ul.level0 {padding:0; background:none;}
	</style>
<%
};

var bodyContent = {
%>

<!-- 菜单 -->
<% include("/static/component/include/menu.html"){} %>
		
<div style="height: 550px;width: 100%;overflow: hidden;">
	<div style="height: 90%;width: 20%;float: left;overflow-x:auto ">
		<ul id="tree" class="ztree" style="width:260px; overflow:auto;"></ul>
	</div>
	<div style="height: 90%;width: 80%;float: left; ">
		<IFRAME ID="testIframe" Name="testIframe" FRAMEBORDER=0 SCROLLING="no" width="100%"  height="95%" SRC="column/list?attr.id=1"></IFRAME>
	</div>
</div>

<%}; %>


<% layout("/pages/template/_layout.html",{head:headContent,body:bodyContent}){ %>
<%} %>
